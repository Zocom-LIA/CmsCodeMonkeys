@page "/sites/{siteId:int}/webpages"
@using CodeMonkeys.CMS.Public.Components.Account.Shared
@using CodeMonkeys.CMS.Public.Components.Shared
@using CodeMonkeys.CMS.Public.Components.Shared.UI
@using CodeMonkeys.CMS.Public.Shared.Services
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components.Authorization
@inherits AuthenticationBaseComponent<WebPagesIndex>
@rendermode InteractiveServer
@attribute [Authorize(Roles = "User, Admin")]

<PageTitle>@Site?.Name</PageTitle>

<UserViewer>

    <div class="toolbar">
        <label for="font-size">Font Size: </label>
        <select id="font-size" @bind="SelectedFontSize">
            <option value="12">12px</option>
            <option value="14">14px</option>
            <option value="16">16px</option>
            <option value="18">18px</option>
            <option value="20">20px</option>
            <option value="22">22px</option>
            <option value="24">24px</option>
        </select>

        <label for="font-family">Font Family: </label>
        <select id="font-family" @bind="SelectedFontFamily">
            <option value="Arial">Arial</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Verdana">Verdana</option>
            <option value="Courier New">Courier New</option>
            <option value="Georgia">Georgia</option>
        </select>

        <label for="font-color">Font Color: </label>
        <input type="color" id="font-color" @bind="SelectedFontColor" />
    </div>

    <div id="styled-content" style="@GetTextStyle()">
        <h2>Example Text</h2>
        <p>
            This is an example of a paragraph. The style changes from the toolbar above will be applied here.
        </p>
    </div>

    <div class="Content_Layout">
        <!-- Original content that should remain unaffected -->
        <h2>Unaffected Section</h2>
        
                <div class="webpages-row">
                    <div class="webpages-col-md-8">
                        <div class="webpages-card">
                            <div class="webpages-card-header">
                                Overview for @Site?.Name
                            </div>
                            <div class="webpages-card-body">
                                <StatusMessage Message="@ErrorMessage" />
                                <button type="button" class="btn btn-primary" @onclick="async() => await AddOrUpdatePageAsync()">Create new page</button>

                                @if (Site != null && Site.Pages.Any())
                                {
                                    <h4>Pages</h4>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Page Title</th>
                                                <th>Created by</th>
                                                <th>Created Date</th>
                                                <th>LastModified</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (WebPage Page in Site.Pages)
                                            {
                                                <tr>
                                                    <td>@Page.Title</td>
                                                    <td>@Page.Author?.Email</td>
                                                    <td>@Page.CreatedDate.ToString("yyyy-MM-dd")</td>
                                                    <td>@Page.LastModifiedDate.ToString("yyyy-MM-dd")</td>
                                                    <td>
                                                        <button class="btn btn-primary" @onclick="async () => await AddOrUpdatePageAsync(Page.WebPageId)">Edit title</button>
                                                        <button class="btn btn-secondary" @onclick="async () => await EditContentsAsync(Page.WebPageId)">Edit content</button>
                                                        <button class="btn btn-danger" @onclick="async () => await DeletePageAsync(Page.WebPageId)">Delete</button>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                }
                            </div>
                            <div class="webpages-card-footer">
                                <button type="button" class="btn btn-primary w-100" @onclick="async () => await AddOrUpdatePageAsync()">Create new Page!</button>
                            </div>
                        </div>
                    </div>
                </div>
    </div>

</UserViewer>